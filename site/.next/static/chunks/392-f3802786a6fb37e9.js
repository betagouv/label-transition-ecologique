(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[392],{37392:function(e,t,i){Promise.resolve().then(i.bind(i,12119))},80874:function(e,t,i){"use strict";i.d(t,{O:function(){return l}});var r=i(53248);let l=(0,r.eI)("https://rlarzronkgoyvtdkltqy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJsYXJ6cm9ua2dveXZ0ZGtsdHF5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDQ0MjM3NTcsImV4cCI6MTk1OTk5OTc1N30.Ciu6o-2Tnjm0yY7UuYcUeZNZbRGDOIQ4I6kA6hwkSuw",{db:{schema:"public"}})},12119:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return ee}});var r,l,a=i(26705),o=i(32919),s=i(42333),n=i(93743),c=i(80874);let d=["#21AB8E","#FFCA00","#FF732C","#FFB7AE","#34BAB5"],u='"Marianne", arial, sans-serif',x="2022-01-01",m={fontFamily:u,fontSize:12,axis:{legend:{text:{fontFamily:u,fontSize:14}}},legends:{text:{fontSize:14}},tooltip:{container:{fontSize:14,background:"white",padding:"9px 12px",border:"1px solid #ccc"}}},f=e=>null===e?"":Number(e).toLocaleString("fr-FR"),p={legendPosition:"end",tickSize:5,tickPadding:12,tickRotation:-35,format:e=>new Date(e).toLocaleDateString("fr",{month:"short",year:"numeric"})},g=e=>({tickSize:4,tickPadding:5,tickRotation:0,legend:e,legendOffset:-45,legendPosition:"middle"}),h={anchor:"bottom",direction:"row",justify:!1,translateX:0,translateY:56,itemsSpacing:16,itemWidth:140,itemHeight:18,itemDirection:"left-to-right",itemOpacity:1,symbolSize:18,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}]},_=(e,t)=>e.map((e,i)=>{let{id:r,label:l}=e;return{id:r,label:l,color:(t||d)[i]}}),v=e=>e.reduce((e,t)=>{let{id:i,label:r}=t;return{...e,[i]:r}},{}),b=e=>{var t;let{slice:i,labels:r}=e;return(0,a.jsx)("div",{style:null===(t=m.tooltip)||void 0===t?void 0:t.container,children:i.points.map(e=>(0,a.jsxs)("div",{style:{padding:"3px 0"},children:[(0,a.jsx)(j,{fill:e.serieColor}),r[e.serieId]," ",(0,a.jsx)("b",{children:e.data.yFormatted})]},e.id))})},j=e=>{let{fill:t}=e;return(0,a.jsx)("span",{style:{height:12,width:12,backgroundColor:t,display:"inline-block",marginRight:12}})},y=(e,t,i)=>t?e.eq("code_departement",t):i?e.eq("code_region",i):e.is("code_region",null).is("code_departement",null);function C(e){let{region:t="",department:i=""}=e,{data:r}=(0,s.ZP)("stats_locales_evolution_utilisateur-".concat(t,"-").concat(i),async()=>{let e=c.O.from("stats_locales_evolution_utilisateur").select().gte("mois",x);e=y(e,i,t);let{data:r,error:l}=await e;if(l)throw Error("stats_evolution_utilisateur");return r&&r.length?{precedent:r[r.length-2],courant:r[r.length-1],evolution:[{id:"utilisateurs",label:"Nouveaux utilisateurs",data:r.map(e=>({x:e.mois,y:e.utilisateurs}))},{id:"total_utilisateurs",label:"Total utilisateurs",data:r.map(e=>({x:e.mois,y:e.total_utilisateurs}))}]}:null});if(!r)return null;let{precedent:l,courant:o,evolution:u}=r,f=_(u),j=v(u);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"fr-grid-row fr-grid-row--center",children:(0,a.jsxs)("h6",{children:["La plateforme est utilis\xe9e par\xa0",null==o?void 0:o.total_utilisateurs," personne",(null==o?void 0:o.total_utilisateurs)!==1&&"s",", dont\xa0",null==l?void 0:l.utilisateurs,(null==l?void 0:l.utilisateurs)===1?" nous a":" nous ont"," rejoint le mois dernier"]})}),(0,a.jsx)("div",{style:{height:400},children:(0,a.jsx)(n.fH,{theme:m,colors:d,data:u,margin:{top:5,right:5,bottom:85,left:50},xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto",stacked:!1},curve:"monotoneX",lineWidth:4,pointSize:4,yFormat:" >-.0f",axisBottom:p,axisLeft:g("Nombre d'utilisateurs actifs"),pointColor:{theme:"background"},pointBorderWidth:4,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,enableSlices:"x",sliceTooltip:e=>(0,a.jsx)(b,{...e,labels:j}),legends:[{...h,data:f,translateY:85,itemWidth:180}],animate:!1})})]})}var w=i(81248);function k(e){let{data:t}=(0,s.ZP)("stats_carte_epci_par_departement",async()=>{let{data:e,error:t}=await c.O.from("stats_carte_epci_par_departement").select();if(t)throw Error("stats_carte_epci_par_departement");if(!e||!e.length)return null;let i=Math.max(...e.map(e=>e.actives||0)),r=Math.max(...e.map(e=>e.total||0));return{actives_max:i,total_max:r,ratio_max:i/r,valeurs:e.map(e=>({id:e.insee,total:e.total,actives:e.actives,ratio:(e.actives||0)/(e.total||1)})),geojson:{type:"FeatureCollection",features:e.map(e=>({id:e.insee,...e.geojson}))}}}),{valeur:i,maximum:r}=e;return t?(0,a.jsx)("div",{style:{height:400},children:(0,a.jsx)(w.Co,{colors:"nivo",theme:m,data:t.valeurs,features:t.geojson.features,margin:{top:0,right:0,bottom:60,left:0},domain:[0,t[r]],unknownColor:"#666666",label:"properties.libelle",value:i,valueFormat:">-.0"+("ratio"===i?"%":"f"),projectionScale:1300,projectionTranslation:[.35,3.5],projectionRotation:[0,0,0],enableGraticule:!1,graticuleLineColor:"#dddddd",borderWidth:.5,borderColor:"#152538",legends:[h]})}):null}var L=i(27045);function q(e){let{region:t="",department:i=""}=e,{data:r}=(0,s.ZP)("stats_locales_collectivite_actives_et_total_par_type-".concat(t,"-").concat(i),async()=>{let e=c.O.from("stats_locales_collectivite_actives_et_total_par_type").select();e=y(e,i,t);let{data:r,error:l}=await e;if(l)throw Error(l.message);if(!r||!r.length)return null;let a=r.filter(e=>"EPCI"===e.typologie)[0];return{categories:[{id:a.typologie+" activ\xe9s",label:a.typologie+" activ\xe9s",value:a.actives},{id:a.typologie+" inactifs",label:a.typologie+" inactifs",value:(a.total||0)-(a.actives||0)}],total:a.total}});if(!r)return null;let{categories:l,total:o}=r;return(0,a.jsx)("div",{style:{height:400},children:(0,a.jsx)(L.qx,{colors:["#21AB8E","#FF732C"],theme:m,data:l,total:o||0,rows:10,columns:10,margin:{top:0,right:30,bottom:10,left:30},animate:!1,legends:[{...h,translateY:5}]})})}var F=i(85492);function P(e){let{referentiel:t,region:i="",department:r=""}=e,l=function(e,t,i){let{data:r}=(0,s.ZP)("stats_locales_labellisation_par_niveau-".concat(e,"-").concat(t,"-").concat(i),async()=>{let r=c.O.from("stats_locales_labellisation_par_niveau").select().gte("etoiles",1).eq("referentiel",e).order("etoiles",{ascending:!0});r=y(r,i,t);let{data:l,error:a}=await r;if(a)throw Error("stats_labellisation_par_niveau");return l||null});return null==r?void 0:r.map(e=>({id:e.etoiles,label:"".concat(e.etoiles," \xe9toile").concat((e.etoiles||0)>1?"s":""),value:e.labellisations}))}(t,i,r);return l?(l.length||(l=[{id:1,label:"NA",value:1}]),(0,a.jsx)("div",{style:{height:300},children:(0,a.jsx)(F.Y2,{colors:l.filter(e=>"NA"===e.label).length?["#CCC"]:["#21AB8E","#34BAB5","#FFCA00","#FFB7AE","#FF732C"],theme:m,data:l,margin:{top:40,right:85,bottom:80,left:85},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabel:"label",arcLinkLabelsDiagonalLength:16,arcLinkLabelsStraightLength:14,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},tooltip:()=>null,startAngle:-10,enableArcLabels:!l.filter(e=>"NA"===e.label).length,animate:!1})})):null}function S(e){let{children:t}=e;return(0,a.jsx)("h2",{children:t})}i(20955);let E={marginTop:"2rem",textAlign:"center"};function N(e){let{children:t}=e;return(0,a.jsx)("h6",{style:E,children:t})}let A={textAlign:"center",display:"block"};function B(e){let{children:t}=e;return(0,a.jsx)("em",{style:A,children:t})}function O(e,t){return(0,s.ZP)("stats_locales_tranche_completude-".concat(e,"-").concat(t),async()=>{let i=c.O.from("stats_locales_tranche_completude").select().gt("lower_bound",0).order("lower_bound",{ascending:!1});i=y(i,t,e);let{data:r,error:l}=await i;if(l)throw Error("stats_tranche_completude");return r&&r.length?{tranches:r.map(e=>{var t,i;return{id:e.lower_bound,label:e.lower_bound+"".concat(e.upper_bound?"-"+e.upper_bound:"")+"%",eci:null!==(t=e.eci)&&void 0!==t?t:0,cae:null!==(i=e.cae)&&void 0!==i?i:0}}),inities:T(r),termines:T(r.filter(e=>100===e.lower_bound)),presqueTermines:T(r.filter(e=>null!==e.lower_bound&&e.lower_bound>=80))}:null})}let T=e=>e.reduce((e,t)=>e+(null!==(r=t.cae)&&void 0!==r?r:0)+(null!==(l=t.eci)&&void 0!==l?l:0),0);function I(e){let{referentiel:t,region:i="",department:r=""}=e,{data:l}=O(i,r);if(!l)return null;let o=l.tranches;return("eci"!==t||l.tranches.filter(e=>0!==e.eci).length)&&("cae"!==t||l.tranches.filter(e=>0!==e.cae).length)||(o=[{id:1,label:"NA",eci:1,cae:1}]),(0,a.jsx)("div",{style:{height:300},children:(0,a.jsx)(F.Y2,{colors:o.filter(e=>"NA"===e.label).length?["#CCC"]:["#21AB8E","#34BAB5","#FFCA00","#FFB7AE","#FF732C"],theme:m,data:o,value:t,margin:{top:40,right:85,bottom:25,left:85},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabel:"label",arcLinkLabelsDiagonalLength:10,arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},tooltip:()=>null,animate:!1,enableArcLabels:!l.tranches.filter(e=>"NA"===e.label).length})})}function Z(e){let{region:t="",department:i=""}=e,{data:r}=O(t,i);if(!r)return null;let{inities:l,termines:o,presqueTermines:s}=r;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(N,{children:["\xc9tats des lieux r\xe9alis\xe9s, ventil\xe9s par taux de progression",(0,a.jsx)("br",{}),l," \xe9tat",1!==l&&"s"," des lieux initi\xe9",1!==l&&"s",", dont ",s," r\xe9alis\xe9",1!==s&&"s"," \xe0 plus de 80% et ",o," termin\xe9",1!==o&&"s"," (100%)"]}),(0,a.jsxs)("div",{className:"fr-grid-row fr-grid-row--center fr-grid-row--gutters",children:[(0,a.jsxs)("div",{className:"fr-col-xs-12 fr-col-sm-12 fr-col-md-5 fr-col-lg-5 fr-responsive-img",children:[(0,a.jsx)(B,{children:"Climat Air \xc9nergie"}),(0,a.jsx)(I,{referentiel:"cae",region:t,department:i})]}),(0,a.jsxs)("div",{className:"fr-col-xs-12 fr-col-sm-12 fr-col-md-5 fr-col-lg-5 fr-responsive-img",children:[(0,a.jsx)(B,{children:"\xc9conomie circulaire"}),(0,a.jsx)(I,{referentiel:"eci",region:t,department:i})]})]})]})}function Y(e){let{region:t="",department:i=""}=e,{data:r}=(0,s.ZP)("stats_locales_evolution_indicateur_referentiel-".concat(t,"-").concat(i),async()=>{let e=c.O.from("stats_locales_evolution_indicateur_referentiel").select().gte("mois",x).order("mois",{ascending:!0});e=y(e,i,t);let{data:r,error:l}=await e;if(l)throw Error("stats_locales_evolution_indicateur_referentiel");return r&&r.length?[{id:"Indicateurs",data:r.map(e=>({x:e.mois,y:e.indicateurs})),last:r[r.length-1].indicateurs}]:null});return r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(B,{children:[(0,a.jsx)("b",{children:f(r[0].last)})," indicateurs des r\xe9f\xe9rentiels renseign\xe9s"]}),(0,a.jsx)("div",{style:{height:"400px"},children:(0,a.jsx)(n.fH,{colors:d,theme:m,data:r,margin:{top:5,right:5,bottom:85,left:55},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1},curve:"monotoneX",lineWidth:4,pointSize:4,yFormat:f,axisBottom:p,axisLeft:{...g("Nombre d’indicateurs des r\xe9f\xe9rentiels renseign\xe9s"),legendOffset:-50},pointBorderWidth:4,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,enableSlices:"x",animate:!1})})]}):null}function W(e){let{region:t="",department:i=""}=e,{data:r}=(0,s.ZP)("stats_locales_evolution_resultat_indicateur_referentiel-".concat(t,"-").concat(i),async()=>{let e=c.O.from("stats_locales_evolution_resultat_indicateur_referentiel").select().gte("mois",x);e=y(e,i,t);let{data:r,error:l}=await e;if(l)throw Error("stats_locales_evolution_resultat_indicateur_referentiel");return r&&r.length?[{id:"Valeurs renseign\xe9es",data:r.map(e=>({x:e.mois,y:e.indicateurs})),last:r[r.length-1].indicateurs}]:null});return r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(B,{children:[(0,a.jsx)("b",{children:f(r[0].last)})," valeurs d’indicateurs des r\xe9f\xe9rentiels renseign\xe9s"]}),(0,a.jsx)("div",{style:{height:"400px"},children:(0,a.jsx)(n.fH,{colors:d,theme:m,data:r,margin:{top:5,right:5,bottom:85,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1},curve:"monotoneX",lineWidth:4,pointSize:4,yFormat:f,axisBottom:p,axisLeft:{...g("Valeurs d’indicateurs renseign\xe9es"),legendOffset:-55},pointBorderWidth:4,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,enableSlices:"x",animate:!1})})]}):null}function z(e){let{region:t="",department:i=""}=e,{data:r}=(0,s.ZP)("stats_locales_evolution_resultat_indicateur_personnalise-".concat(t,"-").concat(i),async()=>{let e=c.O.from("stats_locales_evolution_resultat_indicateur_personnalise").select().gte("mois",x);e=y(e,i,t);let{data:r,error:l}=await e;if(l)throw Error("stats_locales_evolution_resultat_indicateur_personnalise");return r&&r.length?[{id:"Valeurs renseign\xe9es",data:r.map(e=>({x:e.mois,y:e.indicateurs})),last:r[r.length-1].indicateurs}]:null});return r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(B,{children:[(0,a.jsx)("b",{children:f(r[0].last)})," indicateurs personnalis\xe9s renseign\xe9s"]}),(0,a.jsx)("div",{style:{height:"400px"},children:(0,a.jsx)(n.fH,{colors:d,theme:m,data:r,margin:{top:5,right:5,bottom:85,left:55},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1},curve:"monotoneX",lineWidth:4,pointSize:4,yFormat:f,axisBottom:p,axisLeft:{...g("Valeurs d’indicateurs personnalis\xe9s renseign\xe9es"),legendOffset:-50},pointBorderWidth:4,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,enableSlices:"x",animate:!1})})]}):null}let X=(e,t)=>{let i=new Date,r="".concat(i.getFullYear(),"-").concat(i.getMonth()+1,"-01");return(0,s.ZP)("stats_locales_evolution_collectivite_avec_indicateur-".concat(e,"-").concat(t),async()=>{let i=c.O.from("stats_locales_evolution_collectivite_avec_indicateur").select().gte("mois",r);i=y(i,t,e);let{data:l,error:a}=await i;if(a)throw Error("stats_locales_evolution_collectivite_avec_indicateur");return l&&l.length?l[0].collectivites:null})};function R(e){let{region:t="",department:i=""}=e,{data:r}=X(t,i);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(N,{children:["\xc9volution de l’utilisation des indicateurs",(0,a.jsx)("br",{}),r," collectivit\xe9",1!==r&&"s",1===r?" a":" ont"," renseign\xe9 des indicateurs"]}),(0,a.jsxs)("div",{className:"fr-grid-row fr-grid-row--center fr-grid-row--gutters",children:[(0,a.jsx)(D,{children:(0,a.jsx)(Y,{region:t,department:i})}),(0,a.jsx)(D,{children:(0,a.jsx)(W,{region:t,department:i})}),(0,a.jsx)(D,{children:(0,a.jsx)(z,{region:t,department:i})})]})]})}let D=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"fr-col-xs-12 fr-col-sm-12 fr-col-md-4 fr-col-lg-4",children:t})},H={stats_locales_evolution_nombre_fiches:"fiches",stats_locales_evolution_collectivite_avec_minimum_fiches:"collectivites"},J={stats_locales_evolution_nombre_fiches:"Nombre total de fiches",stats_locales_evolution_collectivite_avec_minimum_fiches:"Collectivit\xe9s avec cinq fiches ou plus"},M={fiches:"Fiches",collectivites:"Collectivit\xe9s"};function V(e,t,i){return(0,s.ZP)("".concat(e,"-").concat(t,"-").concat(i),async()=>{let r=c.O.from(e).select().gte("mois",x);r=y(r,i,t);let{data:l,error:a}=await r;if(a)throw Error(e);return l&&l.length?{evolution:[{id:M[H[e]],data:l.map(t=>({x:t.mois,y:t[H[e]]}))}],last:l[l.length-1][H[e]]}:null})}function G(e){let{vue:t,region:i="",department:r=""}=e,{data:l}=V(t,i,r);return l?(0,a.jsx)("div",{style:{height:"100%",maxHeight:"400px"},children:(0,a.jsx)(n.fH,{colors:d,theme:m,data:l.evolution,margin:{top:5,right:5,bottom:55,left:50},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1},curve:"monotoneX",lineWidth:4,enablePoints:!0,yFormat:" >-.0f",axisTop:null,axisRight:null,axisBottom:p,axisLeft:g(J[t]),pointColor:{theme:"background"},pointBorderWidth:4,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,enableSlices:"x",animate:!1})}):null}function U(e){let{region:t="",department:i=""}=e,{data:r}=V("stats_locales_evolution_collectivite_avec_minimum_fiches",t,i),{data:l}=V("stats_locales_evolution_nombre_fiches",t,i);return(0,a.jsxs)(a.Fragment,{children:[r&&l&&(0,a.jsx)(N,{children:(0,a.jsxs)(a.Fragment,{children:["\xc9volution de l'utilisation des plans d'action",(0,a.jsx)("br",{}),r.last," collectivit\xe9",1!==r.last&&"s",1===r.last?" a ":" ont ","cr\xe9\xe9 des plans d’actions et ",l.last," fiche",1!==l.last&&"s"," actions",1===l.last?" a \xe9t\xe9 cr\xe9\xe9e":" ont \xe9t\xe9 cr\xe9\xe9es"]})}),(0,a.jsxs)("div",{className:"fr-grid-row fr-grid-row--center fr-grid-row--gutters",children:[r&&(0,a.jsxs)("div",{className:"fr-col-xs-12 fr-col-sm-12 fr-col-md-6 fr-col-lg-6 fr-ratio-16x9",children:[(0,a.jsx)(B,{children:"Nombre de collectivit\xe9s avec 5+ fiches"}),(0,a.jsx)(G,{vue:"stats_locales_evolution_collectivite_avec_minimum_fiches",region:t,department:i})]}),l&&(0,a.jsxs)("div",{className:"fr-col-xs-12 fr-col-sm-12 fr-col-md-6 fr-col-lg-6 fr-ratio-16x9",children:[(0,a.jsx)(B,{children:"Nombre de fiches action cr\xe9\xe9es"}),(0,a.jsx)(G,{vue:"stats_locales_evolution_nombre_fiches",region:t,department:i})]})]})]})}function Q(e){let{region:t="",department:i=""}=e,{data:r}=(0,s.ZP)("stats_locales_evolution_total_activation-".concat(t,"-").concat(i),async()=>{let e=c.O.from("stats_locales_evolution_total_activation").select().gte("mois",x);e=y(e,i,t);let{data:r,error:l}=await e;if(l)throw Error(l.message);return r&&r.length?{courant:r[r.length-1],evolution:[{id:"total_epci",label:"EPCI",data:r.map(e=>({x:e.mois,y:e.total_epci}))},{id:"total_syndicat",label:"syndicats",data:r.map(e=>({x:e.mois,y:e.total_syndicat}))},{id:"total_commune",label:"communes",data:r.map(e=>({x:e.mois,y:e.total_commune}))}]}:null});if(!r)return null;let{courant:l,evolution:o}=r,u=_(o),f=v(o);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"fr-grid-row fr-grid-row--center",children:(0,a.jsxs)("h6",{children:[l.total," ",1!==l.total?"collectivit\xe9s activ\xe9es":"collectivit\xe9 activ\xe9e"," ","dont ",l.total_epci," EPCI,\xa0",l.total_syndicat," syndicat",1!==l.total_syndicat&&"s"," ","et\xa0",l.total_commune," commune",1!==l.total_commune&&"s"]})}),(0,a.jsx)("div",{style:{height:400},children:(0,a.jsx)(n.fH,{colors:d,theme:m,data:o,margin:{top:5,right:5,bottom:80,left:50},xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto",stacked:!0},enableArea:!0,areaOpacity:1,curve:"monotoneX",enablePoints:!1,yFormat:" >-.0f",axisBottom:p,axisLeft:g("\xc9volution des collectivit\xe9s activ\xe9es"),pointColor:{theme:"background"},pointBorderWidth:3,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,enableSlices:"x",sliceTooltip:e=>{var t;let{slice:i}=e;return(0,a.jsxs)("div",{style:null===(t=m.tooltip)||void 0===t?void 0:t.container,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:i.points.map(e=>e.data.y).reduce((e,t)=>e+t,0)})," ","collectivit\xe9s, dont :"]}),i.points.map(e=>(0,a.jsxs)("div",{style:{color:e.serieColor,padding:"3px 0"},children:[e.data.yFormatted," ",f[e.serieId]]},e.id))]})},legends:[{...h,translateX:-20,translateY:80,itemWidth:100,itemsSpacing:12,data:u}],animate:!1})})]})}function K(e){let{region:t="",department:i=""}=e,{data:r}=(0,s.ZP)("territoires_cot-".concat(t,"-").concat(i),async()=>{let e=c.O.from("stats_locales_engagement_collectivite").select(void 0,{head:!0,count:"exact"}).eq("cot",!0);i?e=e.eq("code_departement",i):t&&(e=e.eq("code_region",t));let{count:r,error:l}=await e;if(l)throw Error("territoires_cot");return r||0}),{data:l}=(0,s.ZP)("territoires_labellises-".concat(t,"-").concat(i),async()=>{let e=c.O.from("stats_locales_engagement_collectivite").select(void 0,{head:!0,count:"exact"});i?e.url.searchParams.append("and","(or(etoiles_eci.gte.1, etoiles_cae.gte.1),code_departement.eq.".concat(i,")")):t?e.url.searchParams.append("and","(or(etoiles_eci.gte.1, etoiles_cae.gte.1),code_region.eq.".concat(t,")")):e.url.searchParams.append("and","(or(etoiles_eci.gte.1, etoiles_cae.gte.1))");let{count:r,error:l}=await e;if(l)throw Error("territoires_labellises");return r||0}),{data:o}=(0,s.ZP)("territoires_engages-".concat(t,"-").concat(i),async()=>{let e=c.O.from("stats_locales_engagement_collectivite").select(void 0,{head:!0,count:"exact"});i?e.url.searchParams.append("and","(or(etoiles_eci.gte.1, etoiles_cae.gte.1, cot.eq.true),code_departement.eq.".concat(i,")")):t?e.url.searchParams.append("and","(or(etoiles_eci.gte.1, etoiles_cae.gte.1, cot.eq.true),code_region.eq.".concat(t,")")):e.url.searchParams.append("and","(or(etoiles_eci.gte.1, etoiles_cae.gte.1, cot.eq.true))");let{count:r,error:l}=await e;if(l)throw Error("territoires_engages");return r||0});return(0,a.jsxs)(N,{children:[f(o||0)," ",1===o?"Territoire Engag\xe9 ":"Territoires Engag\xe9s ","Transition \xc9cologique, dont ",f(l||0)," ",1===l?"collectivit\xe9 labellis\xe9e":"collectivit\xe9s labellis\xe9es"," ","et ",f(r||0)," en Contrat d’Objectif Territorial (COT)"]})}function $(e){var t;let{region:i="",department:r=""}=e,{data:l}=(0,s.ZP)("stats_locales_evolution_nombre_utilisateur_par_collectivite-".concat(i,"-").concat(r),async()=>{let e=c.O.from("stats_locales_evolution_nombre_utilisateur_par_collectivite").select().gte("mois",x);e=y(e,r,i);let{data:t,error:l}=await e;if(l)throw Error("stats_evolution_nombre_utilisateur_par_collectivite");return t&&t.length?{courant:t[t.length-1],evolution:[{id:"moyen",label:"Nombre moyen d'utilisateurs",data:t.map(e=>({x:e.mois,y:e.moyen}))},{id:"maximum",label:"Nombre maximum d'utilisateurs",data:t.map(e=>({x:e.mois,y:e.maximum}))}]}:null});if(!l)return null;let{courant:o,evolution:d}=l,u=["#FF732C","#7AB1E8"],f=_(d,u),j=v(d);return(0,a.jsxs)("div",{children:[(0,a.jsxs)(N,{children:["Chaque collectivit\xe9 compte en moyenne\xa0",null==o?void 0:null===(t=o.moyen)||void 0===t?void 0:t.toFixed(2)," utilisateur",(null==o?void 0:o.moyen)!==1&&"s",(0,a.jsx)("br",{}),"Avec un maximum de ",null==o?void 0:o.maximum," utilisateur",(null==o?void 0:o.maximum)!==1&&"s"," \uD83D\uDCAA"]}),(0,a.jsx)("div",{className:"fr-grid-row fr-grid-row--center"}),(0,a.jsx)("div",{style:{height:300},children:(0,a.jsx)(n.fH,{colors:u,theme:m,data:d,margin:{top:5,right:5,bottom:120,left:50},xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto",stacked:!1},curve:"monotoneX",lineWidth:2,pointSize:0,enableGridY:!1,yFormat:" >-.2f",axisBottom:p,axisLeft:g("Utilisateurs/collectivit\xe9"),pointColor:{theme:"background"},pointBorderWidth:4,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,enableSlices:"x",sliceTooltip:e=>(0,a.jsx)(b,{...e,labels:j}),legends:[{...h,data:f,direction:"column",translateX:-20,translateY:120,itemWidth:230}],animate:!1})})]})}var ee=e=>{let{regionCode:t,departmentCode:i}=e,r=!t&&!i;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Z,{customBackground:"#fff",children:[r?(0,a.jsx)("p",{children:"Territoires en Transitions est une plateforme publique gratuite et open-source d\xe9velopp\xe9e avec ses utilisateurs afin d’aider les collectivit\xe9s dans le pilotage et la priorisation de leur transition \xe9cologique."}):(0,a.jsxs)("p",{children:["Cette page pr\xe9sente les statistiques de d\xe9ploiement et d’usage"," ",t?"r\xe9gionales":"d\xe9partementales"," de la plateforme Territoires en Transitions."]}),(0,a.jsxs)(S,{children:["D\xe9ployer la transition \xe9cologique sur la totalit\xe9 du territoire",r&&" national"]}),(0,a.jsxs)("p",{children:["La transition \xe9cologique n\xe9cessite d’\xeatre d\xe9ploy\xe9e sur la totalit\xe9 des intercommunalit\xe9s (1254 EPCI \xe0 fiscalit\xe9 propre au 1er janvier 2022) ainsi que leurs communes et syndicats associ\xe9s qui ont une responsabilit\xe9 et une influence forte sur la planification et la mise en œuvre de la transition \xe9cologique \xe0 l’\xe9chelle locale.",(0,a.jsx)("br",{}),"Les statistiques suivantes pr\xe9sentent le nombre de collectivit\xe9s activ\xe9es sur la plateforme. Une collectivit\xe9 est consid\xe9r\xe9e comme activ\xe9e lorsqu’au moins une personne utilisatrice a \xe9t\xe9 rattach\xe9e \xe0 cette collectivit\xe9 sur la plateforme."]}),(0,a.jsx)(Q,{region:t,department:i}),(0,a.jsxs)(N,{children:["Progression de l’activation des EPCI \xe0 fiscalit\xe9 propre",r&&" sur le territoire national"]}),(0,a.jsxs)("div",{className:"fr-grid-row fr-grid-row--center",children:[r&&(0,a.jsxs)("div",{className:"fr-col-xs-12 fr-col-sm-12 fr-col-md-4 fr-col-lg-4 fr-ratio-1x1",children:[(0,a.jsx)(B,{children:"Nombre EPCI actifs"}),(0,a.jsx)(k,{valeur:"actives",maximum:"actives_max"})]}),r&&(0,a.jsxs)("div",{className:"fr-col-xs-12 fr-col-sm-12 fr-col-md-4 fr-col-lg-4 fr-ratio-1x1",children:[(0,a.jsx)(B,{children:"Pourcentage EPCI actifs"}),(0,a.jsx)(k,{valeur:"ratio",maximum:"ratio_max"})]}),(0,a.jsxs)("div",{className:"fr-col-xs-12 fr-col-sm-12 fr-col-md-4 fr-col-lg-4 fr-ratio-1x1",children:[(0,a.jsx)(B,{children:"Progression globale"}),(0,a.jsx)(q,{region:t,department:i})]})]})]}),(0,a.jsxs)(o.Z,{customBackground:"#fff",children:[(0,a.jsx)(S,{children:"Outiller les personnes charg\xe9es de la planification \xe9cologique"}),(0,a.jsx)("p",{children:"La transition \xe9cologique est un sujet transversal et syst\xe9mique qui concerne de nombreuses personnes au sein d’une collectivit\xe9 : les diff\xe9rent(e)s charg\xe9(e)s de mission (climat, \xe9conomie circulaire, urbanisme, mobilit\xe9s, biodiversit\xe9…), coordinatrices de programmes, des services techniques, ainsi que les partenaires et prestataires avec lesquels travaille la collectivit\xe9. La plateforme facilite la collaboration entre les personnes qui travaillent au sein d’une m\xeame \xe9quipe pour faire avancer l’action de la collectivit\xe9."}),(0,a.jsx)(C,{region:t,department:i}),(0,a.jsx)($,{region:t,department:i})]}),(0,a.jsxs)(o.Z,{className:"flex-col",customBackground:"#fff",children:[(0,a.jsx)(S,{children:"Conna\xeetre l’\xe9tat des lieux des forces et faiblesses de chaque territoire"}),(0,a.jsx)("p",{children:"L’\xe9tat des lieux est une \xe9tape incontournable dans toute d\xe9marche de planification. Pour accompagner les collectivit\xe9s dans cet exercice, la plateforme Territoires en Transitions s’appuie sur les r\xe9f\xe9rentiels Climat, Air, Energie et Economie Circulaire de l’ADEME."}),(0,a.jsx)(Z,{region:t,department:i})]}),(0,a.jsxs)(o.Z,{customBackground:"#fff",children:[(0,a.jsx)(S,{children:"Planifier et prioriser les actions en faveur de la transition \xe9cologique"}),(0,a.jsx)("p",{children:"Pour suivre la progression des actions d\xe9cid\xe9es, les collectivit\xe9s sont amen\xe9es \xe0 suivre de nombreux plans d’actions politiques et r\xe9glementaires tels que des Plans de Transition \xc9cologique, Plans Climat Air \xc9nergie Territoriaux (PCAET), Plans \xe9conomie circulaire, Plans de mobilit\xe9, Plans v\xe9lo, etc. Elles ont besoin d’un outil qui leur permette de suivre la progression des actions pr\xe9vues dans ces plans."}),(0,a.jsx)(U,{region:t,department:i})]}),(0,a.jsxs)(o.Z,{customBackground:"#fff",children:[(0,a.jsx)(S,{children:"Suivre les indicateurs cl\xe9s de r\xe9alisation et d’impact de la transition \xe9cologique"}),(0,a.jsx)("p",{children:"Afin d’objectiver la progression des actions les collectivit\xe9s mesurent la progression au moyen d’indicateurs de r\xe9alisation et d’impact de r\xe9f\xe9rence ou personnalis\xe9s."}),(0,a.jsx)(R,{region:t,department:i})]}),(0,a.jsxs)(o.Z,{customBackground:"#fff",children:[(0,a.jsx)(S,{children:"Partager et valoriser la progression de chaque territoire"}),(0,a.jsx)("p",{children:"Lorsqu’elles r\xe9alisent leur \xe9tat des lieux sur la plateforme, les collectivit\xe9s \xe9valuent leur performance au regard des r\xe9f\xe9rentiels nationaux. Elles obtiennent ainsi un score qui leur permet d’acc\xe9der \xe0 la labellisation “Territoire Engag\xe9 Transition Ecologique”."}),(0,a.jsx)(K,{region:t,department:i}),(0,a.jsxs)("div",{className:"fr-grid-row fr-grid-row--center fr-grid-row--gutters",children:[(0,a.jsxs)("div",{className:"fr-col-xs-12 fr-col-sm-12 fr-col-md-5 fr-col-lg-5",children:[(0,a.jsx)(B,{children:"Nombre de labellis\xe9s CAE par niveau de labellisation"}),(0,a.jsx)(P,{referentiel:"cae",region:t,department:i})]}),(0,a.jsxs)("div",{className:"fr-col-xs-12 fr-col-sm-12 fr-col-md-5 fr-col-lg-5",children:[(0,a.jsx)(B,{children:"Nombre de labellis\xe9s ECI par niveau de labellisation"}),(0,a.jsx)(P,{referentiel:"eci",region:t,department:i})]})]})]})]})}},32919:function(e,t,i){"use strict";var r=i(26705),l=i(54440),a=i.n(l);t.Z=e=>{let{id:t,children:i,containerClassName:l="",className:o="",customBackground:s}=e;return(0,r.jsx)("section",{id:t,className:a()("section fr-py-7w",l),style:{backgroundColor:s},children:(0,r.jsx)("div",{className:a()("fr-container flex flex-col gap-4",o),children:i})})}}}]);