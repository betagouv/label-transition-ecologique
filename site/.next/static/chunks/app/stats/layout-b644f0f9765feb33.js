(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[727],{54440:function(e,t){var n;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var l=typeof n;if("string"===l||"number"===l)e.push(n);else if(Array.isArray(n)){if(n.length){var a=s.apply(null,n);a&&e.push(a)}}else if("object"===l){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var i in n)r.call(n,i)&&n[i]&&e.push(i)}}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0!==(n=(function(){return s}).apply(t,[]))&&(e.exports=n)}()},21301:function(e,t,n){Promise.resolve().then(n.bind(n,88331))},80874:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var r=n(53248);let s=(0,r.eI)("https://rlarzronkgoyvtdkltqy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJsYXJ6cm9ua2dveXZ0ZGtsdHF5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDQ0MjM3NTcsImV4cCI6MTk1OTk5OTc1N30.Ciu6o-2Tnjm0yY7UuYcUeZNZbRGDOIQ4I6kA6hwkSuw",{db:{schema:"public"}})},88331:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(26705),s=n(32919),l=n(20955),a=n(42333),i=n(80874),o=n(24033),u=e=>{let{name:t,label:n,emptyOptionLabel:s,options:l,value:a,style:i,onChange:o}=e;return(0,r.jsxs)("div",{style:i,children:[(0,r.jsx)("label",{className:"fr-label",htmlFor:t,children:n}),(0,r.jsxs)("select",{onChange:e=>o(e.target.value),value:a,className:"fr-select",id:t,name:t,children:[(0,r.jsx)("option",{value:"",children:null!=s?s:"S\xe9lectionnez une option"},"none"),l.map(e=>(0,r.jsx)("option",{value:e.value,children:e.name},e.value))]})]})},c=e=>{var t;let{onChange:n}=e,s=(0,o.useRouter)(),c=null!==(t=(0,o.usePathname)())&&void 0!==t?t:"",[f,p]=(0,l.useState)(""),[d,m]=(0,l.useState)(""),h=(0,a.ZP)("region",async()=>{let{data:e,error:t}=await i.O.from("region").select();if(t)throw Error(t.message);return e||null}).data,v=(0,a.ZP)("departement-".concat(f),async()=>{let e=i.O.from("departement").select();f&&(e=e.eq("region_code",f));let{data:t,error:n}=await e;if(n)throw Error(n.message);return t||null}).data,y=()=>{var e;let t=null==v?void 0:v.find(e=>e.code===d);n(null!==(e=null==t?void 0:t.libelle)&&void 0!==e?e:null)},g=()=>{var e;let t=null==h?void 0:h.find(e=>e.code===f);n(null!==(e=null==t?void 0:t.libelle)&&void 0!==e?e:null)};return((0,l.useEffect)(()=>{let e=c.split("/");2===e.length&&"stats"===e[1]?(m(""),p(""),n(null)):4===e.length&&"stats"===e[1]&&("region"===e[2]?(p(e[3]),m("")):"departement"===e[2]&&m(e[3]))},[c,n]),(0,l.useEffect)(()=>{d?y():f&&g()},[h,v]),(0,l.useEffect)(()=>{d?(y(),s.push("/stats/departement/".concat(d))):f?(g(),s.push("/stats/region/".concat(f))):s.push("/stats/")},[d,s]),(0,l.useEffect)(()=>{f?(g(),s.push("/stats/region/".concat(f))):s.push("/stats/")},[f,s]),h&&v)?(0,r.jsxs)("div",{className:"fr-select-group",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",columnGap:"50px",rowGap:"20px",justifyItems:"start",alignItems:"end"},children:[(0,r.jsx)(u,{name:"region",label:"R\xe9gion",emptyOptionLabel:"Toutes les r\xe9gions",options:h.map(e=>({value:e.code,name:e.libelle})),value:f,style:{width:"100%"},onChange:p}),(0,r.jsx)(u,{name:"department",label:"D\xe9partement",emptyOptionLabel:"Tous les d\xe9partements",options:v.map(e=>({value:e.code,name:e.libelle})),value:d,style:{width:"100%"},onChange:m}),(0,r.jsx)("button",{className:"fr-btn fr-btn--secondary",onClick:()=>{p(""),m("")},style:{visibility:d||f?"visible":"hidden"},children:"D\xe9sactiver tous les filtres"})]}):null},f=e=>{let{children:t}=e,[n,a]=(0,l.useState)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.Z,{containerClassName:"!pb-0",customBackground:"#fff",children:[(0,r.jsxs)("h1",{children:["Statistiques",n?" - ".concat(n):""]}),(0,r.jsx)(c,{onChange:a})]}),t]})}},32919:function(e,t,n){"use strict";var r=n(26705),s=n(54440),l=n.n(s);t.Z=e=>{let{id:t,children:n,containerClassName:s="",className:a="",customBackground:i}=e;return(0,r.jsx)("section",{id:t,className:l()("section fr-py-7w",s),style:{backgroundColor:i},children:(0,r.jsx)("div",{className:l()("fr-container flex flex-col gap-4",a),children:n})})}},69991:function(e,t,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(20955),s=Symbol.for("react.element"),l=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,l={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!o.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===l[r]&&(l[r]=t[r]);return{$$typeof:s,type:e,key:u,ref:c,props:l,_owner:i.current}}t.Fragment=l,t.jsx=u,t.jsxs=u},26705:function(e,t,n){"use strict";e.exports=n(69991)},24033:function(e,t,n){e.exports=n(68165)}},function(e){e.O(0,[248,333,121,114,744],function(){return e(e.s=21301)}),_N_E=e.O()}]);