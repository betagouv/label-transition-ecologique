(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[327],{33934:function(e,l,s){Promise.resolve().then(s.bind(s,69863))},69863:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return d}});var a=s(26705),n=s(20955),r=s(59499),t=s(54440),i=s.n(t);let o=e=>{let{open:l,onClose:s,children:t,className:o,autoHideDuration:u}=e,{refs:c,context:m,strategy:d}=(0,r.YF)({open:l,strategy:"fixed"}),{getFloatingProps:p}=(0,r.NI)([(0,r.bQ)(m)]),[x,g]=(0,n.useState)(void 0);return(0,n.useLayoutEffect)(()=>{var e;g(null===(e=m.refs.floating.current)||void 0===e?void 0:e.getBoundingClientRect().width)},[m.refs.floating]),(0,n.useEffect)(()=>{let e;return l&&(e=setInterval(()=>{s()},null!=u?u:4e3)),()=>clearInterval(e)},[l,u,s]),(0,a.jsx)(r.ll,{children:l&&(0,a.jsx)("div",{...p({ref:c.setFloating,style:{position:d,maxWidth:"40rem",left:"calc(50% - (".concat(x,"px + 32px) / 2 )")},className:i()("mx-4 py-2 px-4 bottom-6 text-white bg-gray-800 rounded-md z-[10000]",o)}),children:t})})};var u=s(80874);let c=[{group:"Questions relatives au programme Territoire Engag\xe9 Transition \xc9cologique",options:[{value:1,label:"Informations sur le programme Territoire Engag\xe9 Transition \xc9cologique"},{value:2,label:"Processus d’audit et de labellisation"},{value:3,label:"R\xe9f\xe9rentiel Climat Air \xc9nergie"},{value:4,label:"R\xe9f\xe9rentiel \xc9conomie circulaire"}]},{group:"Questions relatives \xe0 la plateforme Territoires en transitions",options:[{value:5,label:"Cr\xe9ation de compte ou connexion"},{value:6,label:"Suggestions d’am\xe9liorations"},{value:7,label:"Questions sur l’utilisation de la plateforme"}]},{group:"Aucun de ces sujets ?",options:[{value:8,label:"Autre"}]}],m={categorie:"",objet:{value:"",label:""},prenom:"",nom:"",email:"",message:""};var d=()=>{let[e,l]=(0,n.useState)(m),[s,r]=(0,n.useState)(null),t=e=>{l(l=>({...l,[e.target.name]:e.target.value}))},d=async s=>{s.preventDefault();let a={...e,objet:e.objet.label},{data:n,error:t}=await u.O.functions.invoke("site_send_message",{body:a});n?(r("success"),l(m)):(t?console.error(t):console.error("site_send_message : aucune donn\xe9e re\xe7ue"),r("error"))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("form",{onSubmit:d,children:[(0,a.jsxs)("div",{className:"fr-input-group",children:[(0,a.jsx)("label",{className:"fr-label",htmlFor:"input-objet",children:"Objet de votre message"}),(0,a.jsxs)("select",{className:"fr-select",id:"objet",name:"objet",required:!0,onChange:e=>{var s,a;let n=e.target.options[e.target.selectedIndex],r=null!==(a=null===(s=n.closest("optgroup"))||void 0===s?void 0:s.label)&&void 0!==a?a:"";l(l=>({...l,categorie:r,objet:{value:e.target.value,label:n.innerText}}))},value:e.objet.value,children:[(0,a.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"Selectionnez une option"}),c.map(e=>(0,a.jsx)("optgroup",{label:e.group,children:e.options.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))},e.group))]})]}),(0,a.jsxs)("div",{className:"fr-input-group",children:[(0,a.jsx)("label",{className:"fr-label",htmlFor:"input-name",children:"Votre pr\xe9nom"}),(0,a.jsx)("input",{className:"fr-input",type:"text",id:"prenom",name:"prenom",required:!0,onChange:t,value:e.prenom})]}),(0,a.jsxs)("div",{className:"fr-input-group",children:[(0,a.jsx)("label",{className:"fr-label",htmlFor:"input-surname",children:"Votre nom"}),(0,a.jsx)("input",{className:"fr-input",type:"text",id:"nom",name:"nom",required:!0,onChange:t,value:e.nom})]}),(0,a.jsxs)("div",{className:"fr-input-group",children:[(0,a.jsx)("label",{className:"fr-label",htmlFor:"input-email",children:"Votre adresse email professionnelle"}),(0,a.jsx)("input",{className:"fr-input",type:"email",id:"email",name:"email",required:!0,onChange:t,value:e.email})]}),(0,a.jsxs)("div",{className:"fr-input-group",children:[(0,a.jsx)("label",{className:"fr-label",htmlFor:"input-message",children:"Votre message"}),(0,a.jsx)("textarea",{className:"fr-input",id:"message",name:"message",required:!0,onChange:t,value:e.message})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{className:"fr-btn rounded-lg",children:"Envoyer"})})]}),(0,a.jsx)(o,{open:null!==s,onClose:()=>r(null),className:i()("!text-white",{"!bg-[#18753C]":"success"===s,"!bg-[#CE0500]":"error"===s}),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex mr-3 ".concat(i()({"fr-icon-check-line":"success"===s,"fr-icon-close-line":"error"===s}))}),"success"===s?"Votre message a bien \xe9t\xe9 envoy\xe9":"error"===s?"Une erreur est survenue lors de l'envoi de votre message":""]})})]})}},80874:function(e,l,s){"use strict";s.d(l,{O:function(){return n}});var a=s(53248);let n=(0,a.eI)("https://rlarzronkgoyvtdkltqy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJsYXJ6cm9ua2dveXZ0ZGtsdHF5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDQ0MjM3NTcsImV4cCI6MTk1OTk5OTc1N30.Ciu6o-2Tnjm0yY7UuYcUeZNZbRGDOIQ4I6kA6hwkSuw",{db:{schema:"public"}})}},function(e){e.O(0,[248,340,121,114,744],function(){return e(e.s=33934)}),_N_E=e.O()}]);